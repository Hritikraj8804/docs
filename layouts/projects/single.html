{{ define "main" }}
<div class="docs-layout main-content">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-section">
            <h4 class="sidebar-title">Project Docs</h4>
            <ul class="sidebar-nav">
                {{ range (where .Site.RegularPages "Section" "projects") }}
                <li>
                    <a href="{{ .Permalink }}" class="sidebar-link{{ if eq $.Permalink .Permalink }} active{{ end }}">
                        {{ .Title }}
                    </a>
                </li>
                {{ end }}
            </ul>
        </div>

        <!-- Table of Contents for current page -->
        {{ if .TableOfContents }}
        <div class="sidebar-section" style="margin-top: var(--space-xl);">
            <h4 class="sidebar-title">On This Page</h4>
            <div class="toc-list">
                {{ .TableOfContents }}
            </div>
        </div>
        {{ end }}
    </aside>

    <!-- Main Content -->
    <article class="content">
        <header style="margin-bottom: var(--space-xl);">
            <h1 style="margin-top: 0;">{{ .Title }}</h1>
            <div class="card-meta">
                <div class="card-tags">
                    {{ range .Params.tags }}
                    <span class="tag">{{ . }}</span>
                    {{ end }}
                </div>
                <span class="reading-time">⏱ {{ .ReadingTime }} min read</span>
            </div>
        </header>

        {{ .Content }}

        <!-- Prev/Next navigation -->
        <nav
            style="margin-top: var(--space-3xl); padding-top: var(--space-xl); border-top: 1px solid var(--border); display: flex; justify-content: space-between;">
            {{ with .PrevInSection }}
            <a href="{{ .Permalink }}" class="btn btn-ghost">← {{ .Title | truncate 30 }}</a>
            {{ else }}<span></span>{{ end }}

            {{ with .NextInSection }}
            <a href="{{ .Permalink }}" class="btn btn-ghost">{{ .Title | truncate 30 }} →</a>
            {{ end }}
        </nav>
    </article>
</div>
{{ end }}